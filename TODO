LEDGER  -*- mode: org; fill-column: 78 -*-

#+STARTUP: content
#+SEQ_TODO: TODO(@) STARTED WAITING(@) DELEGATED(@) DEFERRED(@) | DONE(@) CANCELLED(@) WONTFIX(@) WORKSFORME INVALID(@) DUPLICATE(@) CLOSED TESTED NOTE
#+TAGS: LINK(l)
#+DRAWERS: PROPERTIES LOGBOOK OUTPUT SCRIPT SOURCE
#+CATEGORY: Ledger

* Bugs
  :PROPERTIES:
  :CATEGORY: Bugs
  :END:
** TODO [#A] The --account option is not working for metadata				 :ATTACH:
#+begin_src sh
   ./ledger -f AISER0033.dat bal
#+end_src
   :OUTPUT:
              $10.44  Internal:Travel
              $44.24  Projects:Meals
             $-54.68  Source:Visa
--------------------
                   0
   :END:

#+begin_src sh
   ./ledger -f AISER0033.dat reg
#+end_src
   :OUTPUT:
09-Sep-27 HUDSON NEWS HOUSTN .. Source:Visa                  $-6.55       $-6.55
                                Projects:Meals                $6.55            0
09-Sep-27 PEET'S COFFEE & TEA.. Source:Visa                  $-2.44       $-2.44
                                Projects:Meals                $2.44            0
09-Sep-28 FUSIA NEW YORK, NY    Source:Visa                 $-15.25      $-15.25
                                Projects:Meals               $15.25            0
09-Sep-29 BALUCHI'S NEW YORK,.. Source:Visa                 $-20.00      $-20.00
                                Projects:Meals               $20.00            0
                                Source:Visa                 $-10.44      $-10.44
                                Internal:Travel              $10.44            0
   :END:

#+begin_src sh
   ./ledger -f AISER0033.dat bal '%ER=AISER0033'
#+end_src
   :OUTPUT:
              $44.24  Projects:Meals
             $-44.24  Source:Visa
--------------------
                   0
   :END:

#+begin_src sh
   ./ledger -f AISER0033.dat bal '%ER=AISER0036'
#+end_src
   :OUTPUT:
              $10.44  Internal:Travel
             $-10.44  Source:Visa
--------------------
                   0
   :END:

#+begin_src sh
   ./ledger -f AISER0033.dat bal '--account=tag("ER")'
#+end_src
   No output?!
   :PROPERTIES:
   :ID:       CB3FFE90-6C53-438C-8A87-4D7616782FAE
   :Attachments: bug.dat
   :END:
   [2010-01-04 Mon 16:57]
** TODO The option -p this no longer works
   :PROPERTIES:
   :ID:       14F7B5C7-1FAC-4750-B389-E9FAA7BB0B9B
   :END:
   [2009-12-29 Tue 16:07]
** TODO Ledger no longer builds
   :PROPERTIES:
   :ID:       507609E4-343F-487D-8A01-FDDE54D86E0F
   :END:
   [2009-12-13 Sun 01:12]
** TODO Scoping error with the account directive and included files		    :LINK:ATTACH:
   - Note taken on [2009-12-08 Tue 19:45] \\
     Mentioned in this e-mail: [[message://E53FE149-FD4B-43F1-9A01-4DC9BF138DF3@surryhill.net][Ledger Bugfixes]].
   :PROPERTIES:
   :ID:       F4A477E6-C4F6-43B1-ABCC-4DC325C2869A
   :Attachments: timelog.dat a.dat
   :END:
   [2009-12-08 Tue 19:45]
** TODO Ledger dies if a periodic transaction is unbalanced				   :LINK:
#+begin_src ledger
~ Monthly
   Aufwand:Bargeld    0,30€
   Aktiva:Bank:Girokonto  -0,40€
#+end_src
  It crashes tries to use the transaction's position, which is uninitialized.
  :PROPERTIES:
  :ID:       DDB54BB8-8C1C-4129-A137-07A38068F3BE
  :Message:  [[message://4B0D8A2D.9020300@gmail.com][Re: "Assertion `this->is_initialized()' failed"]]
  :END:
  [2009-12-01 Tue 02:55]
** TODO There is a bug with the new fixed rate feature				    :LINK:ATTACH:
   - Note taken on [2009-12-11 Fri 02:12] \\
     Javier [[message://92a1cace0912100848v3b6e81bfp332590a8057d73fe@mail.gmail.com][writes]]:

     I found that the problem is not related to the new "fixed" directive at all.

     After looking through the fixed-directive code I couldn't find any problems
     with it. I also noticed that the annotation details change between parsing
     time (when they are fine) and the amount::value() call.

     Then I changed all my fixed directives in the ledger file to {=$####} entries
     for all the foreign currencies (no "fixed" directive in the whole file) and
     the problem persisted!: some {=} entries used the wrong price from another {=}
     entry.

     I think the problem is somewhere between parsing and applying the algorithms
     (at least for -V reg) where the original post details seem to have changed. At
     least for ANNOTATION_PRICE_FIXATED entries. (I used printf's in parsing and in
     amount_t::value() to see the price change).

     This is the command i'm using: ./ledger -f multicurrency-no-fixed.ledger -V
     reg payable:jlopez

     I ran this with the master branch on ubuntu 64 bits.
   :PROPERTIES:
   :ID:       DC6AA45B-F714-4209-B0CC-E6CAFB75E50E
   :Message:  [[message://53ed3320-3d2d-46d8-8dd3-98b953e926fb@e7g2000vbi.googlegroups.com][Re: Multicurrency and reg problem]]
   :Attachments: multicurrency-no-fixed.ledger.zip multicurrency-fixed.ledger.zip
   :END:
   [2009-12-01 Tue 02:39]
** TODO Attached file should print out Unrealized Gains in the report			 :ATTACH:
   - Note taken on [2009-11-25 Wed 04:48] \\
     It should print out:
     :OUTPUT:
                        0  Assets
                 $-800.00    Brokerage
                  $800.00    Checking
                 $-100.00  Equity:Unrealized Gains
                  $100.00  Equity:Unrealized Losses
     --------------------
                        0
     :END:
     Once this is fixed, correct test/baseline/opt-unrealized.test.
   :PROPERTIES:
   :ID:       22AA1522-30A0-403F-B16A-B8F674AC9125
   :Attachments: bug.dat
   :END:
   [2009-11-25 Wed 04:47]
** TODO next_element should honor quoting
  To make this possible:
#+begin_src ledger
  P 2009/08/20 "FOO BAR" $2
#+end_src
  :PROPERTIES:
  :ID:       1D6EB807-6BFA-4C63-B993-930102A7AFF2
  :END:
  [2009-11-25 Wed 04:27]
** TODO sm is seeing a segfault with the register command				   :LINK:
   - Note taken on [2009-12-06 Sun 06:05] \\
     It happens on Leopard for me in a virtual machine.
   - Note taken on [2009-11-25 Wed 04:40] \\
     This is happening because boost::regex is constructing a bad object.
   :PROPERTIES:
   :ID:       46196FD4-B82B-4633-A728-94D0FFB65F69
   :Message:  [[message://hef2ir$tuh$1@ger.gmane.org][register segfault with recent build]]
   :END:
   [2009-11-24 Tue 22:13]
** TODO Another balance reporting bug, where the ordering is wrong			 :ATTACH:
   :PROPERTIES:
   :ID:       8026905D-42B6-40EE-AEBF-24ED0CC5DC53
   :Attachments: bug2.dat
   :END:
   [2009-11-24 Tue 03:08]
** TODO Bug when not using commodities in a posting's cost
   For example:
#+begin_src ledger
   2009/11/01 Sample
       Assets                1 apple {=0.10}
       Equity
#+end_src
   :PROPERTIES:
   :ID:       F29DE89C-73CD-4344-B6F7-BB7584AA6FFD
   :END:
   [2009-11-24 Tue 01:11]
* Features
  :PROPERTIES:
  :CATEGORY: Features
  :END:
** DONE Consider Martin's @openbal directive
   - State "DONE"       [2008-07-28 Mon]
   [[message://20080421153138.26F681144C3@banane.furius.ca]["AutoOpenBalance" from Martin Blais <blais@furius.ca>]]
   :PROPERTIES:
   :ID: 70E793CC-81E7-4E87-A3D7-4E18CD649C58
   :END:
   [2008-06-30 Mon]
** TODO Make the prices report use standard report query terms				   :LINK:
  The idea here is that report query filtering is done before the building up
  of commodities prices, so that you can see which commodities are involved
  with which reports:
#+begin_src sh
  ledger prices 'Lebensmittel:Milch'
  ledger prices '%kauf=leche'
#+end_src
  :PROPERTIES:
  :ID:       5229AE44-F390-4E4E-BAC6-674373CC775D
  :Message:  [[message://4B0E7757.1030607@gmail.com][How to type out a sales slip?]]
  :END:
  [2009-12-01 Tue 03:04]
** TODO lot_price should be able to return whether a commodity is "fixed rate"
   :PROPERTIES:
   :ID:       EF5442E5-4A83-45A5-98F8-DFEEF6F8AC6D
   :END:
   [2009-11-24 Tue 22:02]
** TODO Allow for period expressions "4 months ago" and "last 5 weeks"
   - State "TODO"       from "STARTED"    [2009-12-07 Mon 04:24]
   :PROPERTIES:
   :ID:       38B2FCC3-49E3-422D-8F90-03EF4A64382E
   :END:
   [2009-11-18 Wed 05:51]
* Emacs
  :PROPERTIES:
  :CATEGORY: Emacs
  :END:
* Python
  :PROPERTIES:
  :CATEGORY: Python
  :END:
* Build
  :PROPERTIES:
  :CATEGORY: Build
  :END:
** TODO acprep gives no warning about an unknown phase
   :PROPERTIES:
   :ID:       3FAC3387-9DCC-40AB-BE60-BA692E922F3F
   :END:
   [2009-12-06 Sun 06:03]
** TODO Create a PO file for Alexis to translate into German
   :PROPERTIES:
   :ID:       9D19729F-343C-464D-BE88-143C9DDA9394
   :END:
   [2009-11-09 Mon 03:40]
* Tests
  :PROPERTIES:
  :CATEGORY: Tests
  :END:
** TODO Read through Peter's accounting article, and make sure it all applies		 :ATTACH:
   :PROPERTIES:
   :ID:       72FC1715-E53C-4D4D-BF2C-514EB376DD19
   :Attachments: Tutorial%20on%20multiple%20currency%20accounting.pdf
   :END:
   [2009-11-24 Tue 22:04]
** TODO Rewrite the sample.dat file to be more realistic
   :PROPERTIES:
   :ID:       6E0F0FD6-38A2-4269-870F-41DE8B10D23C
   :END:
   [2009-11-20 Fri 18:31]
** TODO Use coverage analysis to determine if everything is being tested
   :PROPERTIES:
   :ID: 13E43A50-FC0C-4C3D-A175-7C6CB147A37C
   :END:
   [2008-08-14 Thu]
* Docs
  :PROPERTIES:
  :CATEGORY: Docs
  :END:
** TODO Remove --commodity-as-account from the man page and manual
   :PROPERTIES:
   :ID:       849EB210-BEEB-4FDE-A90C-688400D55ECE
   :END:
   [2009-12-29 Tue 16:07]
** TODO Fill out membership form for the Software Conservancy
   :PROPERTIES:
   :ID:       78635C7A-98F2-494F-93A4-7CDA6094E681
   :Message:  [[message://4B240026.5040408@softwarefreedom.org][Re: Offer of membership to the Ledger project into the Software Freedom Conservancy, Inc.]]
   :END:
   [2009-12-17 Thu 02:44]
** TODO How to declare a statement reconciliation					 :ATTACH:
   :PROPERTIES:
   :ID:       32A4A048-886F-43FC-892E-EC125F372750
   :Attachments: foo.dat
   :END:
   [2009-12-10 Thu 18:05]
